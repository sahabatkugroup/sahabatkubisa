<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ongkir Express – Cek Tarif (Asal & Tujuan)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  :root{
    --bg-start:#6fb6ff;     /* biru langit */
    --bg-end:#2f80ed;       /* biru tua elegan */
    --card:#ffffff;
    --muted:#8aa4c0;
    --text:#182133;
    --brand:#2f80ed;
    --brand-2:#5ea3ff;
    --accent:#e9f2ff;
    --success:#16a34a;
    --warning:#f59e0b;
    --danger:#ef4444;
    --shadow: 0 20px 45px rgba(4,32,66,.18);
    --radius-xl: 20px;
    --radius-lg: 14px;
    --radius-md: 12px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color:var(--text);
    background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
    padding:22px;
  }

  .wrap{
    max-width: 1000px;
    margin: 0 auto;
  }

  .hero{
    position:relative;
    background: radial-gradient(1100px 400px at 10% -10%, rgba(255,255,255,.22), rgba(255,255,255,0)) ,
                linear-gradient(135deg,#3aa0ff, #1c64f2 70%);
    border-radius: var(--radius-xl);
    padding: 28px clamp(16px, 3vw, 36px);
    color:#fff;
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .hero:after{
    content:"";
    position:absolute;
    right:-120px; top:-120px;
    width:280px; height:280px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), rgba(255,255,255,0) 60%);
    filter: blur(2px);
    transform: rotate(15deg);
  }
  .brand{
    display:flex; align-items:center; gap:12px;
    font-weight:800; letter-spacing:.8px;
    text-transform:uppercase;
    font-size: clamp(18px, 2.4vw, 22px);
  }
  .brand i{
    background:#fff; color:#1c64f2;
    width:36px; height:36px; display:grid; place-items:center;
    border-radius: 10px;
    box-shadow:0 10px 25px rgba(0,0,0,.15), inset 0 -2px 3px rgba(0,0,0,.08);
  }
  
  /* Tombol Kembali (sticky pojok kanan) */
  .btn-kembali{
    position:fixed;
    top:20px; right:20px;
    background:#f97316; /* oranye */
    color:#fff;
    padding:10px 16px;
    border-radius:12px;
    font-weight:600;
    font-size:14px;
    text-decoration:none;
    box-shadow:0 6px 18px rgba(0,0,0,.2);
    transition:.2s;
    z-index:1000;
  }
  .btn-kembali:hover{ background:#ea580c; }

  .headline{
    font-size: clamp(22px, 3.2vw, 30px);
    font-weight: 700;
    margin: 12px 0 6px;
  }
  .sub{
    opacity:.95; font-weight:500;
  }

  .card{
    margin-top:16px;
    background:var(--card);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow);
    overflow:hidden;
  }

  .card__body{ padding: clamp(16px, 2.8vw, 28px); }
  .headline{
    font-size: clamp(22px, 3.2vw, 30px);
    font-weight: 700;
    margin: 12px 0 6px;
  }
  .sub{
    opacity:.95; font-weight:500;
  }

  .card{
    margin-top:16px;
    background:var(--card);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow);
    overflow:hidden;
  }

  .card__body{ padding: clamp(16px, 2.8vw, 28px); }

  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: clamp(12px, 2vw, 18px);
  }
  @media (max-width: 820px){
    .grid{ grid-template-columns: 1fr; }
  }

  .field{
    position:relative;
  }
  .label{
    font-size:14px; font-weight:600; color:#2a3b58;
    margin: 2px 0 8px 6px;
    display:flex; align-items:center; gap:8px;
  }

  .control{
    position:relative;
  }
  .input{
    width:100%;
    border:1.5px solid #e6eef9;
    padding: 16px 46px 16px 48px;
    border-radius: 14px;
    font-size:16px;
    outline:none;
    transition:.2s border-color, .2s box-shadow;
    background:linear-gradient(#fff, #fbfdff);
  }
  .input:focus{
    border-color:#9bc7ff;
    box-shadow:0 0 0 5px #e8f2ff;
  }
  .control .licon{
    position:absolute; left:12px; top:50%; transform:translateY(-50%);
    font-size:18px; color:#6c84a8;
  }
  .control .clear-btn{
    position:absolute; right:10px; top:50%; transform:translateY(-50%);
    border:none; background:#f1f6ff; color:#1e429f;
    width:30px; height:30px; border-radius:9px; cursor:pointer;
  }
  .control .clear-btn:hover{ filter:brightness(0.98) }

  /* Suggestions dropdown */
  .suggest{
    position:absolute; z-index:40;
    left:0; right:0; top: calc(100% + 6px);
    background:#fff; border:1px solid #e8eef8;
    border-radius: 14px; overflow:hidden;
    box-shadow: 0 14px 40px rgba(17,38,87,.15);
    max-height: 320px; overflow-y:auto; display:none;
  }
  .s-item{
    padding: 12px 14px; cursor:pointer; display:flex; align-items:center; gap:10px;
  }
  .s-item:hover, .s-item.active{ background:#f6faff; }
  .s-icon{
    width:28px; height:28px; border-radius:8px; display:grid; place-items:center;
    background:#eef5ff; color:#2161ff;
    flex: 0 0 28px;
  }
  .s-text{ line-height:1.2 }
  .s-name{ font-weight:600; }
  .s-price{ font-size:12px; color:#5a6d89; margin-top:2px; }
  mark{
    background:#ffefb3;
    padding:0 .15em; border-radius:4px;
  }

  .actions{
    display:flex; flex-wrap:wrap; gap:10px;
    margin-top: 6px;
  }
  .btn{
    border:none; cursor:pointer; font-weight:700;
    border-radius: 14px; padding: 14px 18px;
    display:inline-flex; align-items:center; gap:10px;
    transition:.18s transform, .18s box-shadow, .18s background;
    font-size:15px;
  }
  .btn:active{ transform: translateY(1px) }
  .btn-primary{
    color:#fff; background:linear-gradient(180deg, #3b82f6, #1d4ed8);
    box-shadow: 0 12px 30px rgba(30,64,175,.35);
  }
  .btn-primary:hover{ filter:brightness(1.03) }
  .btn-ghost{
    background:#eff5ff; color:#1d4ed8; border:1px solid #d9e7ff;
  }
  .btn-ghost:hover{ background:#e9f1ff }
  .btn-danger{
    background:#fee2e2; color:#b91c1c; border:1px solid #fecaca;
  }
  .btn-danger:hover{ filter:brightness(0.99) }

  .results{
    margin-top:18px;
    display:grid; gap:14px;
    grid-template-columns: 1fr 1fr;
  }
  @media (max-width: 820px){
    .results{ grid-template-columns: 1fr; }
  }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    background:#f3f7ff; color:#1e40af; border:1px solid #dbe7ff;
    padding:8px 12px; border-radius: 999px; font-size:13px; font-weight:600;
  }

  .kartu{
    border:1px solid #eaf0fb; border-radius: 16px; padding:18px;
    background: linear-gradient(180deg,#ffffff, #fbfdff);
  }
  .kartu h4{
    margin:0 0 8px; font-size:16px; letter-spacing:.2px;
    display:flex; align-items:center; gap:8px;
  }
  .harga{
    font-size:28px; font-weight:800; color:#0b5bd3;
  }
  .muted{ color:#607599; font-size:13px }
  .formula{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#f6f9ff; border:1px dashed #d9e7ff; padding:10px 12px; border-radius: 10px; display:inline-block; margin-top:8px }

  .footer{
    text-align:center; color:#eaf2ff; margin-top:18px; font-size:13px;
  }
</style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div class="brand">
        <i class="fa-solid fa-box"></i> Ongkir Express
      </div>
      <a href="index.html" class="btn-kembali"><i class="fa-solid fa-arrow-left"></i> Kembali</a>
      <div class="headline">Cek Tarif Pengiriman – Asal & Tujuan</div>
      <div class="sub">Pilih lokasi lewat pencarian pintar. Bisa isi salah satu atau keduanya. Otomatis hitung sesuai aturan.</div>
    </header>


    <main class="card">
      <div class="card__body">
        <div class="grid">
          <!-- ASAL -->
          <div class="field" id="field-asal">
            <div class="label"><i class="fa-solid fa-location-arrow"></i> Asal (opsional)</div>
            <div class="control">
              <i class="fa-solid fa-magnifying-glass licon"></i>
              <input id="asalInput" class="input" type="text" placeholder="Ketik lokasi asal… (opsional)"/>
              <button class="clear-btn" title="Bersihkan" id="clearAsal"><i class="fa-solid fa-xmark"></i></button>
              <div class="suggest" id="asalSuggest"></div>
            </div>
          </div>
          <!-- TUJUAN -->
          <div class="field" id="field-tujuan">
            <div class="label"><i class="fa-solid fa-location-dot"></i> Tujuan</div>
            <div class="control">
              <i class="fa-solid fa-magnifying-glass licon"></i>
              <input id="tujuanInput" class="input" type="text" placeholder="Ketik lokasi tujuan…"/>
              <button class="clear-btn" title="Bersihkan" id="clearTujuan"><i class="fa-solid fa-xmark"></i></button>
              <div class="suggest" id="tujuanSuggest"></div>
            </div>
          </div>
        </div>

        <div class="actions">
          <button id="cekBtn" class="btn btn-primary"><i class="fa-solid fa-calculator"></i> Cek Ongkir</button>
          <button id="bersihkanBtn" class="btn btn-ghost"><i class="fa-solid fa-broom"></i> Bersihkan</button>
        </div>

        <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
          <span class="pill"><i class="fa-regular fa-circle-check"></i> Isi salah satu = ongkir normal</span>
          <span class="pill"><i class="fa-regular fa-circle-check"></i> Isi dua-duanya = (Asal + Tujuan) − 6.000</span>
        </div>

        <div class="results" id="results" style="display:none">
          <div class="kartu">
            <h4><i class="fa-solid fa-tag"></i> Ongkir Normal</h4>
            <div class="harga" id="normalHarga">–</div>
            <div class="muted" id="normalKeterangan">—</div>
          </div>
          <div class="kartu">
            <h4><i class="fa-solid fa-route"></i> Ongkir Rute (Asal + Tujuan − 6.000)</h4>
            <div class="harga" id="ruteHarga">–</div>
            <div class="muted" id="ruteKeterangan">—</div>
            <div class="formula" id="ruteFormula" style="display:none"></div>
          </div>
        </div>
      </div>
    </main>

    <p class="footer">© 2025 Sahabatku Delivery • Tema biru langit • UI elegan</p>
  </div>

<script>
  // === DATA: hanya LOKASI & ONGKIR (tanpa zona) ===
  const ongkirData = [
    { lokasi: "JATIBARANG", ongkir: 6000 },
    { lokasi: "JATIBARANG BARU", ongkir: 6000 },
    { lokasi: "GAJAH ASRI", ongkir: 7000 },
    { lokasi: "PILANGSARI", ongkir: 7000 },
    { lokasi: "BINTARA", ongkir: 7000 },
    { lokasi: "GG PROYEK", ongkir: 8000 },
    { lokasi: "JL PANTURA", ongkir: 9000 },
    { lokasi: "BALDES PILANGSARI", ongkir: 10000 },
    { lokasi: "POM BENSIN PANTURA", ongkir: 11000 },
    { lokasi: "COMO", ongkir: 12000 },
    { lokasi: "SUKALILA", ongkir: 13000 },
    { lokasi: "SUKAWERA", ongkir: 13000 },
    { lokasi: "KLIWED", ongkir: 14000 },
    { lokasi: "JL. KERTASMAYA (TELADAN)", ongkir: 16000 },
    { lokasi: "KERTASMAYA", ongkir: 18000 },
    { lokasi: "TULUNGAGUNG", ongkir: 20000 },
    { lokasi: "BINARIA", ongkir: 22000 },
    { lokasi: "JL RAYA KERTASMAYA", ongkir: 25000 },
    { lokasi: "CANDANGPINGGANG", ongkir: 32000 },
    { lokasi: "TERSANA", ongkir: 26000 },
    { lokasi: "JENGKOK", ongkir: 30000 },
    { lokasi: "JAMBE", ongkir: 35000 },
    { lokasi: "BTN SAPHIRE", ongkir: 7000 },
    { lokasi: "KEBULEN", ongkir: 8000 },
    { lokasi: "BANTARAGUNG", ongkir: 8000 },
    { lokasi: "PAWIDEAN", ongkir: 9000 },
    { lokasi: "JATISAWIT", ongkir: 10000 },
    { lokasi: "JATISAWIT LOR", ongkir: 12000 },
    { lokasi: "POM BENSIN JATISAWIT", ongkir: 13000 },
    { lokasi: "KRASAK", ongkir: 14000 },
    { lokasi: "KALIMATI", ongkir: 16000 },
    { lokasi: "LOBENER", ongkir: 18000 },
    { lokasi: "TELUKAGUNG", ongkir: 20000 },
    { lokasi: "PLUMBON", ongkir: 25000 },
    { lokasi: "DUKUH", ongkir: 28000 },
    { lokasi: "PEKANDANGAN JAYA", ongkir: 32000 },
    { lokasi: "PEKANDANGAN", ongkir: 35000 },
    { lokasi: "SINDANG", ongkir: 40000 },
    { lokasi: "INDRAMAYU", ongkir: 40000 },
    { lokasi: "INDRAMAYU KOTA", ongkir: 45000 },
    { lokasi: "KARANGSONG", ongkir: 50000 },
    { lokasi: "WIDASARI", ongkir: 7000 },
    { lokasi: "KONGSI", ongkir: 8000 },
    { lokasi: "UJUNGARIS", ongkir: 9000 },
    { lokasi: "UJUNG JAYA", ongkir: 10000 },
    { lokasi: "RS MITRA", ongkir: 10000 },
    { lokasi: "PONDOK SHIDIQ", ongkir: 11000 },
    { lokasi: "UJUNG PENDOK", ongkir: 12000 },
    { lokasi: "KESESIH", ongkir: 12000 },
    { lokasi: "LEUWIGEDE", ongkir: 13000 },
    { lokasi: "SLAUR", ongkir: 14000 },
    { lokasi: "LEGOK SLAUR", ongkir: 16000 },
    { lokasi: "JL LEGOK", ongkir: 18000 },
    { lokasi: "BOJONG SLAWI", ongkir: 17000 },
    { lokasi: "POLINDRA", ongkir: 18000 },
    { lokasi: "LOHBENER", ongkir: 25000 },
    { lokasi: "PAMAYAHAN", ongkir: 28000 },
    { lokasi: "BANGKIR", ongkir: 32000 },
    { lokasi: "RAMBATAN WETAN", ongkir: 33000 },
    { lokasi: "PANYINDANGAN", ongkir: 35000 },
    { lokasi: "TERUSAN SINDANG", ongkir: 40000 },
    { lokasi: "CELENG", ongkir: 22000 },
    { lokasi: "LARANGAN", ongkir: 26000 },
    { lokasi: "LANGUT", ongkir: 28000 },
    { lokasi: "KASMARAN", ongkir: 20000 },
    { lokasi: "JL WARU - KASMARAN", ongkir: 24000 },
    { lokasi: "WARU", ongkir: 28000 },
    { lokasi: "JL LARANGAN - LELEA", ongkir: 30000 },
    { lokasi: "LELEA", ongkir: 31000 },
    { lokasi: "PASAR LELEA", ongkir: 31000 },
    { lokasi: "TAMANSARI LELEA", ongkir: 33000 },
    { lokasi: "PENGAUBAN", ongkir: 35000 },
    { lokasi: "NUNUK", ongkir: 22000 },
    { lokasi: "TUGU LELEA", ongkir: 37000 },
    { lokasi: "JAMBAK", ongkir: 42000 },
    { lokasi: "CIKEDUNG", ongkir: 45000 },
    { lokasi: "TERISI", ongkir: 50000 },
    { lokasi: "POLSEK/BTN LAMA", ongkir: 7000 },
    { lokasi: "BTN LAMA", ongkir: 7000 },
    { lokasi: "KECAMATAN", ongkir: 7000 },
    { lokasi: "BULAK", ongkir: 8000 },
    { lokasi: "SLEMAN", ongkir: 9000 },
    { lokasi: "TAMBI", ongkir: 10000 },
    { lokasi: "POM PERUM TAMBI", ongkir: 11000 },
    { lokasi: "TOANG TAMBI", ongkir: 13000 },
    { lokasi: "BLOK KASMARAN", ongkir: 16000 },
    { lokasi: "JL MANGIR", ongkir: 20000 },
    { lokasi: "MANGIR", ongkir: 23000 },
    { lokasi: "POLSEK SLIYEG", ongkir: 20000 },
    { lokasi: "SUDIKAMPIRAN", ongkir: 22000 },
    { lokasi: "JAYALAKSANA", ongkir: 24000 },
    { lokasi: "SEGERAN", ongkir: 34000 },
    { lokasi: "MUNDU", ongkir: 36000 },
    { lokasi: "JL RAYA KARANGAMPEL", ongkir: 40000 },
    { lokasi: "KARANGAMPEL", ongkir: 45000 },
    { lokasi: "MAJASARI", ongkir: 14000 },
    { lokasi: "MAJASIH", ongkir: 15000 },
    { lokasi: "JL MAJASIH - SLIYEG", ongkir: 18000 },
    { lokasi: "SLIYEG", ongkir: 20000 },
    { lokasi: "SLIYEG LOR", ongkir: 22000 },
    { lokasi: "GADINGAN", ongkir: 24000 },
    { lokasi: "TUGU SLIYEG", ongkir: 25000 },
    { lokasi: "SUDIMAMPIR", ongkir: 30000 },
    { lokasi: "CANGKINGAN", ongkir: 34000 },
    { lokasi: "KEDOKANBUNDER", ongkir: 40000 },
    { lokasi: "JUNTINYUAT", ongkir: 52000 },
    { lokasi: "LIMBANGAN", ongkir: 56000 },
    { lokasi: "BALONGAN", ongkir: 60000 },
    { lokasi: "BABADAN", ongkir: 24000 },
    { lokasi: "TENAJAR", ongkir: 26000 },
    { lokasi: "BANGKALOA ILIR", ongkir: 8000 },
    { lokasi: "GINCU", ongkir: 9000 },
    { lokasi: "BANGKRONG", ongkir: 10000 },
    { lokasi: "PESONA ASRI/SYIFA", ongkir: 10000 },
    { lokasi: "CURUG TEGALGIRANG", ongkir: 12000 },
    { lokasi: "TEGALGIRANG", ongkir: 13000 },
    { lokasi: "KARANGGETAS", ongkir: 14000 },
    { lokasi: "WANASARI", ongkir: 15000 },
    { lokasi: "CANGKRUNG", ongkir: 16000 },
    { lokasi: "TOANG LAJER", ongkir: 17000 },
    { lokasi: "BOJONG MELATI", ongkir: 18000 },
    { lokasi: "JL BOJONG MELATI", ongkir: 22000 },
    { lokasi: "JL BANGODUA - SUKADANA", ongkir: 25000 },
    { lokasi: "LAJER", ongkir: 18000 },
    { lokasi: "JL LAJER - TUKDANA", ongkir: 20000 },
    { lokasi: "TUKDANA", ongkir: 22000 },
    { lokasi: "KARANGKERTA", ongkir: 25000 },
    { lokasi: "KERTICALA", ongkir: 26000 },
    { lokasi: "SUKADANA", ongkir: 25000 },
    { lokasi: "SUKAPERNA", ongkir: 28000 },
    { lokasi: "CANGKO", ongkir: 30000 },
    { lokasi: "RANCAJAWAT", ongkir: 32000 },
    { lokasi: "GADEL", ongkir: 34000 },
    { lokasi: "BODAS", ongkir: 36000 },
    { lokasi: "PERBATESAN MAJALENGKA", ongkir: 40000 },
    { lokasi: "PERTIGAAN WIDASARI-CBG", ongkir: 7000 },
    { lokasi: "KRANYAR CIBOGOR", ongkir: 8000 },
    { lokasi: "TERUSAN CIBOGOR", ongkir: 9000 },
    { lokasi: "CIBOGOR", ongkir: 10000 },
    { lokasi: "BALDES WIDASARI", ongkir: 12000 },
    { lokasi: "CIDENG", ongkir: 13000 },
    { lokasi: "JIMPRET", ongkir: 16000 },
    { lokasi: "JEMBATAN MAJU", ongkir: 18000 },
    { lokasi: "KALENSARI", ongkir: 18000 },
    { lokasi: "MALANGSARI", ongkir: 20000 }
  ];

  // --- UTIL ---
  const formatRp = (n)=> "Rp" + (n||0).toLocaleString('id-ID');

  function findByName(input){
    if(!input) return null;
    const q = input.trim().toLowerCase();
    if(!q) return null;
    // exact first
    let exact = ongkirData.find(x => x.lokasi.toLowerCase() === q);
    if(exact) return exact;
    // startsWith
    let starts = ongkirData.find(x => x.lokasi.toLowerCase().startsWith(q));
    if(starts) return starts;
    // includes
    let inc = ongkirData.find(x => x.lokasi.toLowerCase().includes(q));
    return inc || null;
  }

  // --- AUTOCOMPLETE ---
  function attachAutocomplete(inputEl, dropdownEl){
    let items = [];
    let active = -1;

    function highlight(txt, query){
      const i = txt.toLowerCase().indexOf(query.toLowerCase());
      if(i<0) return txt;
      return txt.substring(0,i) + "<mark>" + txt.substring(i, i+query.length) + "</mark>" + txt.substring(i+query.length);
    }

    function render(list, query){
      dropdownEl.innerHTML = "";
      list.slice(0, 12).forEach((it, idx)=>{
        const div = document.createElement('div');
        div.className = 's-item';
        div.innerHTML = `
          <div class="s-icon"><i class="fa-solid fa-location-dot"></i></div>
          <div class="s-text">
            <div class="s-name">${highlight(it.lokasi, query)}</div>
            <div class="s-price">${formatRp(it.ongkir)}</div>
          </div>
        `;
        div.addEventListener('click', ()=>{
          inputEl.value = it.lokasi;
          hide();
        });
        dropdownEl.appendChild(div);
      });
      dropdownEl.style.display = list.length ? 'block' : 'none';
      active = -1;
    }

    function hide(){ dropdownEl.style.display='none'; }

    inputEl.addEventListener('input', ()=>{
      const q = inputEl.value.trim();
      if(q.length<1){ hide(); return; }
      const list = ongkirData
        .filter(x => x.lokasi.toLowerCase().includes(q.toLowerCase()))
        .sort((a,b)=> a.lokasi.localeCompare(b.lokasi));
      items = list;
      render(items, q);
    });

    inputEl.addEventListener('keydown', (e)=>{
      const visible = dropdownEl.style.display==='block';
      if(!visible) return;
      const count = dropdownEl.children.length;
      if(e.key === 'ArrowDown'){ e.preventDefault(); active = (active+1) % count; updateActive(); }
      else if(e.key === 'ArrowUp'){ e.preventDefault(); active = (active-1+count) % count; updateActive(); }
      else if(e.key === 'Enter'){
        if(active>=0 && dropdownEl.children[active]){
          e.preventDefault();
          dropdownEl.children[active].click();
        }
      } else if(e.key === 'Escape'){ hide(); }
    });

    function updateActive(){
      [...dropdownEl.children].forEach((el,i)=>{
        el.classList.toggle('active', i===active);
        if(i===active) el.scrollIntoView({block:'nearest'});
      });
    }

    document.addEventListener('click', (e)=>{
      if(!dropdownEl.contains(e.target) && e.target!==inputEl){ hide(); }
    });

    return { hide };
  }

  // --- DOM refs ---
  const asalInput = document.getElementById('asalInput');
  const tujuanInput = document.getElementById('tujuanInput');
  const asalSuggest = document.getElementById('asalSuggest');
  const tujuanSuggest = document.getElementById('tujuanSuggest');

  const normalHarga = document.getElementById('normalHarga');
  const normalKet = document.getElementById('normalKeterangan');
  const ruteHarga = document.getElementById('ruteHarga');
  const ruteKet = document.getElementById('ruteKeterangan');
  const ruteFormula = document.getElementById('ruteFormula');
  const results = document.getElementById('results');

  const { hide: hideAsal } = attachAutocomplete(asalInput, asalSuggest);
  const { hide: hideTujuan } = attachAutocomplete(tujuanInput, tujuanSuggest);

  // Clear buttons
  document.getElementById('clearAsal').addEventListener('click', ()=>{ asalInput.value=''; hideAsal(); });
  document.getElementById('clearTujuan').addEventListener('click', ()=>{ tujuanInput.value=''; hideTujuan(); });

  // Bersihkan global
  document.getElementById('bersihkanBtn').addEventListener('click', ()=>{
    asalInput.value = '';
    tujuanInput.value = '';
    hideAsal(); hideTujuan();
    results.style.display = 'none';
  });

  // CEK
  document.getElementById('cekBtn').addEventListener('click', hitung);
  [asalInput, tujuanInput].forEach(el=>{
    el.addEventListener('keydown', e=>{
      if(e.key==='Enter'){ e.preventDefault(); hitung(); }
    });
  });

  function hitung(){
    const asalText = asalInput.value.trim();
    const tujuanText = tujuanInput.value.trim();

    const asalObj = asalText ? findByName(asalText) : null;
    const tujuanObj = tujuanText ? findByName(tujuanText) : null;

    // Validasi minimal salah satu
    if(!asalObj && !tujuanObj){
      results.style.display = 'none';
      alert('Masukkan minimal salah satu lokasi (Asal atau Tujuan) sesuai daftar.');
      return;
    }
    // Jika user mengetik lokasi yang tidak ada
    if(asalText && !asalObj){ alert('Lokasi Asal tidak ditemukan di daftar.'); return; }
    if(tujuanText && !tujuanObj){ alert('Lokasi Tujuan tidak ditemukan di daftar.'); return; }

    // Ongkir Normal:
    // Prioritas tujuan, kalau kosong pakai asal (sesuai “sesuai daftar ongkir”)
    let normalObj = tujuanObj || asalObj;
    normalHarga.textContent = formatRp(normalObj.ongkir);
    normalKet.textContent = `Lokasi: ${normalObj.lokasi}`;

    // Ongkir Rute (hanya jika dua-duanya ada)
    if(asalObj && tujuanObj){
      const total = Math.max(0, (asalObj.ongkir + tujuanObj.ongkir) - 6000);
      ruteHarga.textContent = formatRp(total);
      ruteKet.textContent = `Asal: ${asalObj.lokasi} (${formatRp(asalObj.ongkir)}) • Tujuan: ${tujuanObj.lokasi} (${formatRp(tujuanObj.ongkir)})`;
      ruteFormula.textContent = `${formatRp(asalObj.ongkir)} + ${formatRp(tujuanObj.ongkir)} − ${formatRp(6000)} = ${formatRp(total)}`;
      ruteFormula.style.display = 'inline-block';
    } else {
      ruteHarga.textContent = '—';
      ruteKet.textContent = 'Isi Asal & Tujuan untuk menghitung ongkir rute.';
      ruteFormula.style.display = 'none';
    }
    results.style.display = 'grid';
  }

  // Prefocus
  window.addEventListener('load', ()=> tujuanInput.focus() );
</script>
</body>
</html>
